import{b as R,_ as U,c as g,a as P,f as W,o as m}from"./bootstrap-24f82753.mjs";try{self["workbox:window:6.4.1"]&&_()}catch{}function b(n,r){return new Promise(function(t){var o=new MessageChannel;o.port1.onmessage=function(l){t(l.data)},n.postMessage(r,[o.port2])})}function A(n,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function L(n,r){(r==null||r>n.length)&&(r=n.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=n[t];return o}function I(n,r){var t;if(typeof Symbol=="undefined"||n[Symbol.iterator]==null){if(Array.isArray(n)||(t=function(l,v){if(l){if(typeof l=="string")return L(l,v);var a=Object.prototype.toString.call(l).slice(8,-1);return a==="Object"&&l.constructor&&(a=l.constructor.name),a==="Map"||a==="Set"?Array.from(l):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?L(l,v):void 0}}(n))||r&&n&&typeof n.length=="number"){t&&(n=t);var o=0;return function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(t=n[Symbol.iterator]()).next.bind(t)}try{self["workbox:core:6.4.1"]&&_()}catch{}var k=function(){var n=this;this.promise=new Promise(function(r,t){n.resolve=r,n.reject=t})};function E(n,r){var t=location.href;return new URL(n,t).href===new URL(r,t).href}var p=function(n,r){this.type=n,Object.assign(this,r)};function y(n,r,t){return t?r?r(n):n:(n&&n.then||(n=Promise.resolve(n)),r?n.then(r):n)}function O(){}var N={type:"SKIP_WAITING"};function j(n,r){if(!r)return n&&n.then?n.then(O):Promise.resolve()}var C=function(n){var r,t;function o(u,f){var e,i;return f===void 0&&(f={}),(e=n.call(this)||this).nn={},e.tn=0,e.rn=new k,e.en=new k,e.on=new k,e.un=0,e.an=new Set,e.cn=function(){var c=e.fn,s=c.installing;e.tn>0||!E(s.scriptURL,e.sn.toString())||performance.now()>e.un+6e4?(e.vn=s,c.removeEventListener("updatefound",e.cn)):(e.hn=s,e.an.add(s),e.rn.resolve(s)),++e.tn,s.addEventListener("statechange",e.ln)},e.ln=function(c){var s=e.fn,d=c.target,h=d.state,w=d===e.vn,S={sw:d,isExternal:w,originalEvent:c};!w&&e.mn&&(S.isUpdate=!0),e.dispatchEvent(new p(h,S)),h==="installed"?e.wn=self.setTimeout(function(){h==="installed"&&s.waiting===d&&e.dispatchEvent(new p("waiting",S))},200):h==="activating"&&(clearTimeout(e.wn),w||e.en.resolve(d))},e.dn=function(c){var s=e.hn,d=s!==navigator.serviceWorker.controller;e.dispatchEvent(new p("controlling",{isExternal:d,originalEvent:c,sw:s,isUpdate:e.mn})),d||e.on.resolve(s)},e.gn=(i=function(c){var s=c.data,d=c.ports,h=c.source;return y(e.getSW(),function(){e.an.has(h)&&e.dispatchEvent(new p("message",{data:s,originalEvent:c,ports:d,sw:h}))})},function(){for(var c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];try{return Promise.resolve(i.apply(this,c))}catch(d){return Promise.reject(d)}}),e.sn=u,e.nn=f,navigator.serviceWorker.addEventListener("message",e.gn),e}t=n,(r=o).prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t;var l,v,a=o.prototype;return a.register=function(u){var f=(u===void 0?{}:u).immediate,e=f!==void 0&&f;try{var i=this;return function(c,s){var d=c();return d&&d.then?d.then(s):s(d)}(function(){if(!e&&document.readyState!=="complete")return j(new Promise(function(c){return window.addEventListener("load",c)}))},function(){return i.mn=Boolean(navigator.serviceWorker.controller),i.yn=i.pn(),y(i.bn(),function(c){i.fn=c,i.yn&&(i.hn=i.yn,i.en.resolve(i.yn),i.on.resolve(i.yn),i.yn.addEventListener("statechange",i.ln,{once:!0}));var s=i.fn.waiting;return s&&E(s.scriptURL,i.sn.toString())&&(i.hn=s,Promise.resolve().then(function(){i.dispatchEvent(new p("waiting",{sw:s,wasWaitingBeforeRegister:!0}))}).then(function(){})),i.hn&&(i.rn.resolve(i.hn),i.an.add(i.hn)),i.fn.addEventListener("updatefound",i.cn),navigator.serviceWorker.addEventListener("controllerchange",i.dn),i.fn})})}catch(c){return Promise.reject(c)}},a.update=function(){try{return this.fn?j(this.fn.update()):void 0}catch(u){return Promise.reject(u)}},a.getSW=function(){return this.hn!==void 0?Promise.resolve(this.hn):this.rn.promise},a.messageSW=function(u){try{return y(this.getSW(),function(f){return b(f,u)})}catch(f){return Promise.reject(f)}},a.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&b(this.fn.waiting,N)},a.pn=function(){var u=navigator.serviceWorker.controller;return u&&E(u.scriptURL,this.sn.toString())?u:void 0},a.bn=function(){try{var u=this;return function(f,e){try{var i=f()}catch(c){return e(c)}return i&&i.then?i.then(void 0,e):i}(function(){return y(navigator.serviceWorker.register(u.sn,u.nn),function(f){return u.un=performance.now(),f})},function(f){throw f})}catch(f){return Promise.reject(f)}},l=o,(v=[{key:"active",get:function(){return this.en.promise}},{key:"controlling",get:function(){return this.on.promise}}])&&A(l.prototype,v),o}(function(){function n(){this.Pn=new Map}var r=n.prototype;return r.addEventListener=function(t,o){this.Sn(t).add(o)},r.removeEventListener=function(t,o){this.Sn(t).delete(o)},r.dispatchEvent=function(t){t.target=this;for(var o,l=I(this.Sn(t.type));!(o=l()).done;)(0,o.value)(t)},r.Sn=function(t){return this.Pn.has(t)||this.Pn.set(t,new Set),this.Pn.get(t)},n}());function B(n={}){const{immediate:r=!1,onNeedRefresh:t,onOfflineReady:o,onRegistered:l,onRegisterError:v}=n;let a,u;const f=async(e=!0)=>{e&&(a==null||a.addEventListener("controlling",i=>{i.isUpdate&&window.location.reload()})),u&&u.waiting&&await b(u.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){a=new C("/sw.js",{scope:"/"}),a.addEventListener("activated",e=>{e.isUpdate||o==null||o()});{const e=()=>{t==null||t()};a.addEventListener("waiting",e),a.addEventListener("externalwaiting",e)}a.register({immediate:r}).then(e=>{u=e,l==null||l(e)}).catch(e=>{v==null||v(e)})}return f}function x(n={}){const{immediate:r=!0,onNeedRefresh:t,onOfflineReady:o,onRegistered:l,onRegisterError:v}=n,a=R(!1),u=R(!1);return{updateServiceWorker:B({immediate:r,onNeedRefresh(){a.value=!0,t==null||t()},onOfflineReady(){u.value=!0,o==null||o()},onRegistered:l,onRegisterError:v}),offlineReady:u,needRefresh:a}}const T={setup(n,{expose:r}){r();const{offlineReady:t,needRefresh:o,updateServiceWorker:l}=x({immediate:!0}),a={offlineReady:t,needRefresh:o,updateServiceWorker:l,close:async()=>{t.value=!1,o.value=!1},useRegisterSW:x};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}},M={key:0,class:"pwa-toast",role:"alert"},G={class:"message"},K={key:0},V={key:1};function q(n,r,t,o,l,v){return o.offlineReady||o.needRefresh?(m(),g("div",M,[P("div",G,[o.offlineReady?(m(),g("span",K," App ready to work offline ")):(m(),g("span",V," New content available, click on reload button to update. "))]),o.needRefresh?(m(),g("button",{key:0,onClick:r[0]||(r[0]=a=>o.updateServiceWorker())}," Reload ")):W("",!0),P("button",{onClick:o.close}," Close ")])):W("",!0)}var D=U(T,[["render",q]]);export{D as default};
